# 🤖 디스코드 공책봇 설치 및 실행 가이드

## 📋 목차
1. [사전 준비](#사전-준비)
2. [파일 설치](#파일-설치)
3. [환경 설정](#환경-설정)
4. [봇 실행](#봇-실행)
5. [명령어 사용법](#명령어-사용법)
6. [문제 해결](#문제-해결)

---

## 🔧 사전 준비

### 1. Python 설치 확인
VSCode 터미널을 열고 다음 명령어를 입력하세요:
```bash
python --version
```
- Python 3.8 이상이 설치되어 있어야 합니다.
- 설치되어 있지 않다면 [python.org](https://www.python.org/)에서 다운로드하세요.

### 2. 필요한 정보 확인
다음 정보가 준비되어 있는지 확인하세요:
- ✅ 디스코드 봇 토큰 (DISCORD_BOT_TOKEN)
- ✅ Google Gemini API 키 (GOOGLE_API_KEY)
- ✅ Peanut_prompt_ultimate.txt (땅콩 프롬프트 파일)
- ✅ peanut_all_dataset.jsonl (대화 데이터셋 파일)

---

## 📁 파일 설치

### Step 1: 작업 폴더로 이동
VSCode에서 터미널을 열고 (Ctrl + `) 다음 명령어를 입력하세요:
```bash
cd C:/Users/jinwoo/Desktop/Desktop/03_discord_bot/02_conversation_bot
```

### Step 2: 필요한 파일 확인
다음 파일들이 폴더에 있어야 합니다:
```
02_conversation_bot/
├── bot.py                          (봇 핵심 코드)
├── requirements.txt                (필요한 라이브러리 목록)
├── .env                           (API 키 저장)
├── Peanut_prompt_ultimate.txt     (땅콩 프롬프트)
└── peanut_all_dataset.jsonl       (대화 데이터셋)
```

### Step 3: Python 라이브러리 설치
터미널에서 다음 명령어를 실행하세요:
```bash
pip install -r requirements.txt
```

**설치 확인:**
```bash
pip list
```
다음 패키지들이 보여야 합니다:
- discord.py
- google-generativeai
- python-dotenv
- aiohttp

---

## ⚙️ 환경 설정

### Step 1: .env 파일 수정
`.env` 파일을 열고 실제 API 키로 수정하세요:

```env
# Discord Bot Token
DISCORD_BOT_TOKEN=여기에_실제_디스코드_봇_토큰_입력

# Google Gemini API Key
GOOGLE_API_KEY=여기에_실제_구글_API_키_입력
```

**⚠️ 주의:**
- `여기에_실제_` 부분을 삭제하고 실제 키를 입력하세요
- 따옴표("" 또는 '')는 사용하지 마세요
- 앞뒤 공백이 없도록 주의하세요

**예시:**
```env
DISCORD_BOT_TOKEN=MTIzNDU2Nzg5MDEyMzQ1Njc4OQ.AbCdEf.GhIjKlMnOpQrStUvWxYz
GOOGLE_API_KEY=AIzaSyAaBbCcDdEeFfGgHhIiJjKkLlMmNnOoPpQq
```

### Step 2: 프롬프트 파일 확인
`Peanut_prompt_ultimate.txt` 파일에 실제 땅콩 프롬프트가 작성되어 있는지 확인하세요.

### Step 3: 데이터셋 파일 확인
`peanut_all_dataset.jsonl` 파일에 크롤링한 대화 데이터가 있는지 확인하세요.

---

## 🚀 봇 실행

### Step 1: 봇 실행하기
터미널에서 다음 명령어를 입력하세요:
```bash
python bot.py
```

### Step 2: 실행 확인
다음과 같은 메시지가 나타나면 성공입니다:
```
✅ 공책봇#1234 봇이 실행되었습니다!
📊 현재 모델: Gemini 2.0 Flash
🌡️ Temperature: 1.0
📈 Top-p: 0.95
==================================================
```

### Step 3: 디스코드에서 확인
- 디스코드 서버에서 봇이 온라인 상태인지 확인하세요
- 봇의 프로필 옆에 초록색 불이 켜져 있어야 합니다

---

## 💬 명령어 사용법

### 기본 사용법
1. **자유채팅** 또는 **대신말해요** 채널에서 메시지를 입력하세요
2. 봇이 3초 동안 메시지를 수집한 후 **공책봇** 채널에 답변합니다

### 설정 명령어

#### 1. Temperature 조절
```
!temp 1.5
```
- 0.0 ~ 2.0 범위
- 낮을수록 일관적, 높을수록 창의적

#### 2. Top-p 조절
```
!topp 0.9
```
- 0.0 ~ 1.0 범위
- 낮을수록 확실한 답변, 높을수록 다양한 답변

#### 3. 모델 보기
```
!model view
```
- 사용 가능한 AI 모델 목록 표시

#### 4. 모델 변경
```
!model select gemini-2.0-flash-exp
```
- 사용할 모델을 변경합니다

#### 5. 대화 요약
```
!summarize 2
```
- 최근 2시간 동안의 대화를 요약합니다

#### 6. 명령어 목록
```
!command
```
- 모든 명령어 목록을 보여줍니다

---

## 🔍 문제 해결

### 문제 1: "ModuleNotFoundError: No module named 'discord'"
**해결 방법:**
```bash
pip install discord.py
```

### 문제 2: "ModuleNotFoundError: No module named 'google.generativeai'"
**해결 방법:**
```bash
pip install google-generativeai
```

### 문제 3: 봇이 실행되지 않음
**체크리스트:**
1. `.env` 파일에 API 키가 올바르게 입력되었는지 확인
2. 디스코드 봇 토큰이 유효한지 확인
3. 봇에 "Message Content Intent" 권한이 활성화되어 있는지 확인
   - Discord Developer Portal → Bot → Privileged Gateway Intents 확인

### 문제 4: 봇이 응답하지 않음
**체크리스트:**
1. 봇이 서버에 초대되어 있는지 확인
2. 봇이 **자유채팅**, **대신말해요** 채널을 볼 수 있는 권한이 있는지 확인
3. 봇이 **공책봇** 채널에 메시지를 보낼 수 있는 권한이 있는지 확인
4. 채널 ID가 올바른지 확인 (bot.py 파일에서 확인)

### 문제 5: Google API 오류
**해결 방법:**
1. Google Cloud Console에서 Gemini API가 활성화되어 있는지 확인
2. API 키가 유효한지 확인
3. API 사용량 한도를 초과하지 않았는지 확인

### 문제 6: "FileNotFoundError: Peanut_prompt_ultimate.txt"
**해결 방법:**
1. `Peanut_prompt_ultimate.txt` 파일이 `bot.py`와 같은 폴더에 있는지 확인
2. 파일 이름이 정확히 일치하는지 확인 (대소문자 구분)

---

## 📞 추가 도움말

### 봇 중지하기
- 터미널에서 `Ctrl + C`를 누르세요

### 로그 확인
- 터미널에 표시되는 메시지를 확인하세요
- 오류 메시지가 나타나면 해당 내용을 읽어보세요

### 봇 재시작
1. `Ctrl + C`로 봇 중지
2. `python bot.py`로 다시 실행

---

## 🎉 완료!

모든 설정이 완료되었습니다! 이제 디스코드에서 땅콩 봇과 대화를 즐기세요! 🎊

**즐거운 대화 되세요! 🚀**
